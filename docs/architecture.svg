<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="624px" preserveAspectRatio="none" style="width:787px;height:624px;background:#FFFFFF;" version="1.1" viewBox="0 0 787 624" width="787px" zoomAndPan="magnify"><defs/><g><!--MD5=[7c1b2ffcbff04469fbaa16d6528853b9]
cluster Thing--><g id="cluster_Thing"><path d="M469.5,6 L509.5,6 A3.75,3.75 0 0 1 512,8.5 L519,29.6094 L777.5,29.6094 A2.5,2.5 0 0 1 780,32.1094 L780,249.5 A2.5,2.5 0 0 1 777.5,252 L469.5,252 A2.5,2.5 0 0 1 467,249.5 L467,8.5 A2.5,2.5 0 0 1 469.5,6 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="467" x2="519" y1="29.6094" y2="29.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="39" x="471" y="22.5332">Thing</text></g><!--MD5=[979da56a7f83e2393dc758167ae295d0]
cluster Server--><g id="cluster_Server"><path d="M8.5,302 L57.5,302 A3.75,3.75 0 0 1 60,304.5 L67,325.6094 L626.5,325.6094 A2.5,2.5 0 0 1 629,328.1094 L629,614.5 A2.5,2.5 0 0 1 626.5,617 L8.5,617 A2.5,2.5 0 0 1 6,614.5 L6,304.5 A2.5,2.5 0 0 1 8.5,302 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="67" y1="325.6094" y2="325.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="48" x="10" y="318.5332">Server</text></g><!--MD5=[7772a2c0eb0eced9484310deb93e32c2]
cluster Gateway--><g id="cluster_Gateway"><path d="M449.5,346 L509.5,346 A3.75,3.75 0 0 1 512,348.5 L519,369.6094 L602.5,369.6094 A2.5,2.5 0 0 1 605,372.1094 L605,463.5 A2.5,2.5 0 0 1 602.5,466 L449.5,466 A2.5,2.5 0 0 1 447,463.5 L447,348.5 A2.5,2.5 0 0 1 449.5,346 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="447" x2="519" y1="369.6094" y2="369.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="59" x="451" y="362.5332">Gateway</text></g><!--MD5=[07074073229a58b98d86dbf75a12e332]
cluster Internet--><g id="cluster_Internet"><path d="M32.5,346 L89.5,346 A3.75,3.75 0 0 1 92,348.5 L99,369.6094 L420.5,369.6094 A2.5,2.5 0 0 1 423,372.1094 L423,590.5 A2.5,2.5 0 0 1 420.5,593 L32.5,593 A2.5,2.5 0 0 1 30,590.5 L30,348.5 A2.5,2.5 0 0 1 32.5,346 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="99" y1="369.6094" y2="369.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="56" x="34" y="362.5332">Internet</text></g><!--MD5=[88723051146da09166554e42ec8ff111]
entity sensor--><g id="elem_sensor"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="151" x="483.5" y="62"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="614.5" y="67"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="612.5" y="69"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="612.5" y="73"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="498.5" y="96.5332">Ultrasonic Sensor</text></g><!--MD5=[fd71a720deb277bbd1af72c03fa35a41]
entity py--><g id="elem_py"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85" x="483.5" y="188"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="548.5" y="193"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="546.5" y="195"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="546.5" y="199"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="498.5" y="222.5332">PyCom</text></g><!--MD5=[296df57ef9007dac74070e4982c50e2d]
entity actuator--><g id="elem_actuator"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="692.5" y="188"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="743.5" y="193"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="741.5" y="195"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="741.5" y="199"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="707.5" y="222.5332">Light</text></g><!--MD5=[e701bbac852ce3c7f1c3d2193e52d58f]
entity broker--><g id="elem_broker"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="463" y="402"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="569" y="407"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="567" y="409"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="567" y="413"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="478" y="436.5332">MQTT Broker</text></g><!--MD5=[2b9539b446c540c03d44e9a2528f147d]
entity realtimedb--><g id="elem_realtimedb"><path d="M46,540 C46,530 125,530 125,530 C125,530 204,530 204,540 L204,566.6094 C204,576.6094 125,576.6094 125,576.6094 C125,576.6094 46,576.6094 46,566.6094 L46,540 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M46,540 C46,550 125,550 125,550 C125,550 204,550 204,540 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="56" y="568.5332">Firebase Realtime DB</text></g><!--MD5=[10fb712a5dfe6528bb3d0328de120a66]
entity documentdb--><g id="elem_documentdb"><path d="M239.5,540 C239.5,530 323,530 323,530 C323,530 406.5,530 406.5,540 L406.5,566.6094 C406.5,576.6094 323,576.6094 323,576.6094 C323,576.6094 239.5,576.6094 239.5,566.6094 L239.5,540 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M239.5,540 C239.5,550 323,550 323,550 C323,550 406.5,550 406.5,540 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="249.5" y="568.5332">Firebase Document DB</text></g><!--MD5=[e2307af040e3f87d22824e7603ca28ec]
entity api--><g id="elem_api"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61" x="154.5" y="402"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="195.5" y="407"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="193.5" y="409"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="193.5" y="413"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="169.5" y="436.5332">API</text></g><!--MD5=[08af8945a84acfe1eabc0963aa87c412]
entity web--><g id="elem_web"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="325.5" y="402"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="386.5" y="407"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="384.5" y="409"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="384.5" y="413"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="340.5" y="436.5332">WebUI</text></g><!--MD5=[52340758e4ea7379191b20da15c712ca]
link sensor to py--><g id="link_sensor_py"><path d="M551.51,115.14 C546.14,135.33 538.92,162.44 533.54,182.68 " fill="none" id="sensor-py" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="532.21,187.67,538.3855,179.9977,533.493,182.8374,530.6533,177.9449,532.21,187.67" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="552.87,110.03,546.6945,117.7023,551.587,114.8626,554.4267,119.7551,552.87,110.03" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="545" y="154.4951">checking depth</text></g><!--MD5=[eca0c6a07fbc339af70b8ac1221e1c27]
link py to actuator--><g id="link_py_actuator"><path d="M568.84,212 C603.69,212 652.55,212 686.91,212 " fill="none" id="py-to-actuator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="692.3,212,683.3,208,687.3,212,683.3,216,692.3,212" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="587" y="205.4951">availability light</text></g><!--MD5=[12fbb059d29e9bfb2c59980d6affabd6]
link py to broker--><g id="link_py_broker"><path d="M526,236.09 C526,275.2 526,354.33 526,396.71 " fill="none" id="py-to-broker" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="526,401.94,530,392.94,526,396.94,522,392.94,526,401.94" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="527" y="282.4951">mqtt over wifi</text></g><!--MD5=[0fdc04f3ec110560e916c43c65cc97a2]
link api to web--><g id="link_api_web"><path d="M220.79,426 C249.23,426 289.2,426 320.01,426 " fill="none" id="api-web" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="325.27,426,316.27,422,320.27,426,316.27,430,325.27,426" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="215.7,426,224.7,430,220.7,426,224.7,422,215.7,426" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="234" y="419.4951">over sockets</text></g><!--MD5=[e2a2504b23e16ce9f7386150b129f2d2]
link api to realtimedb--><g id="link_api_realtimedb"><path d="M171.77,454.68 C161.77,475.59 148.11,504.17 138.13,525.03 " fill="none" id="api-realtimedb" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="135.94,529.63,143.4295,523.2341,138.0958,525.1186,136.2113,519.7849,135.94,529.63" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="174,450.02,166.5105,456.4159,171.8442,454.5314,173.7287,459.8651,174,450.02" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="160" y="496.4951">availability</text></g><!--MD5=[3b08bbfb039112ccffaa42ca08d03cbb]
link api to documentdb--><g id="link_api_documentdb"><path d="M214.2,453.56 C237.66,474.89 270.44,504.7 293.88,526.02 " fill="none" id="api-documentdb" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="297.85,529.63,293.8916,520.6116,294.1542,526.2624,288.5034,526.5249,297.85,529.63" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="210.31,450.02,214.2684,459.0384,214.0058,453.3876,219.6566,453.1251,210.31,450.02" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="264" y="496.4951">historic data</text></g><!--MD5=[0201301791c0163c4a5cc565ad009d61]
link broker to api--><g id="link_broker_api"><path d="M513.73,401.83 C497.47,372.83 465.78,325.66 423,306 C376.56,284.66 355.34,286.73 308,306 C262.7,324.44 224.98,368.47 203.7,397.76 " fill="none" id="broker-to-api" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="200.69,401.97,209.1893,396.9939,203.607,397.9091,202.6919,392.3267,200.69,401.97" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="293.5" y="282.4951">Send availability</text></g><!--MD5=[87d76ebd1f7c6afa2d7dd3730fd0ccd8]
@startuml

package Thing {
    component "Ultrasonic Sensor" as sensor
    component "PyCom" as py
    component "Light" as actuator

    sensor <-d-> py : checking depth
    actuator <-l- py : availability light
}

package Server {

package Gateway {
    component "MQTT Broker" as broker
}

py - -> broker : mqtt over wifi

package Internet {
    database "Firebase Realtime DB" as realtimedb
    database "Firebase Document DB" as documentdb

    component API as api

    component WebUI as web

    api <-r-> web : over sockets
    api <-d-> realtimedb : availability
    api <-d-> documentdb : historic data
}

broker -r-> api : Send availability

}

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>