<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="564px" preserveAspectRatio="none" style="width:787px;height:564px;background:#FFFFFF;" version="1.1" viewBox="0 0 787 564" width="787px" zoomAndPan="magnify"><defs/><g><!--MD5=[7c1b2ffcbff04469fbaa16d6528853b9]
cluster Thing--><g id="cluster_Thing"><path d="M469.5,6 L509.5,6 A3.75,3.75 0 0 1 512,8.5 L519,27.6406 L777.5,27.6406 A2.5,2.5 0 0 1 780,30.1406 L780,221.5 A2.5,2.5 0 0 1 777.5,224 L469.5,224 A2.5,2.5 0 0 1 467,221.5 L467,8.5 A2.5,2.5 0 0 1 469.5,6 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="467" x2="519" y1="27.6406" y2="27.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="39" x="471" y="20.6738">Thing</text></g><!--MD5=[979da56a7f83e2393dc758167ae295d0]
cluster Server--><g id="cluster_Server"><path d="M8.5,272 L57.5,272 A3.75,3.75 0 0 1 60,274.5 L67,293.6406 L626.5,293.6406 A2.5,2.5 0 0 1 629,296.1406 L629,554.5 A2.5,2.5 0 0 1 626.5,557 L8.5,557 A2.5,2.5 0 0 1 6,554.5 L6,274.5 A2.5,2.5 0 0 1 8.5,272 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="67" y1="293.6406" y2="293.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="48" x="10" y="286.6738">Server</text></g><!--MD5=[7772a2c0eb0eced9484310deb93e32c2]
cluster Gateway--><g id="cluster_Gateway"><path d="M449.5,314 L509.5,314 A3.75,3.75 0 0 1 512,316.5 L519,335.6406 L602.5,335.6406 A2.5,2.5 0 0 1 605,338.1406 L605,407.5 A2.5,2.5 0 0 1 602.5,410 L449.5,410 A2.5,2.5 0 0 1 447,407.5 L447,316.5 A2.5,2.5 0 0 1 449.5,314 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="447" x2="519" y1="335.6406" y2="335.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="59" x="451" y="328.6738">Gateway</text></g><!--MD5=[07074073229a58b98d86dbf75a12e332]
cluster Internet--><g id="cluster_Internet"><path d="M32.5,314 L89.5,314 A3.75,3.75 0 0 1 92,316.5 L99,335.6406 L420.5,335.6406 A2.5,2.5 0 0 1 423,338.1406 L423,530.5 A2.5,2.5 0 0 1 420.5,533 L32.5,533 A2.5,2.5 0 0 1 30,530.5 L30,316.5 A2.5,2.5 0 0 1 32.5,314 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="99" y1="335.6406" y2="335.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="56" x="34" y="328.6738">Internet</text></g><!--MD5=[88723051146da09166554e42ec8ff111]
entity sensor--><g id="elem_sensor"><rect fill="#F1F1F1" height="45.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="151" x="483.5" y="40"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="614.5" y="45"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="612.5" y="47"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="612.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="498.5" y="72.6738">Ultrasonic Sensor</text></g><!--MD5=[fd71a720deb277bbd1af72c03fa35a41]
entity py--><g id="elem_py"><rect fill="#F1F1F1" height="45.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85" x="483.5" y="162"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="548.5" y="167"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="546.5" y="169"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="546.5" y="173"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="498.5" y="194.6738">PyCom</text></g><!--MD5=[296df57ef9007dac74070e4982c50e2d]
entity actuator--><g id="elem_actuator"><rect fill="#F1F1F1" height="45.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="692.5" y="162"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="743.5" y="167"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="741.5" y="169"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="741.5" y="173"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="707.5" y="194.6738">Light</text></g><!--MD5=[e701bbac852ce3c7f1c3d2193e52d58f]
entity broker--><g id="elem_broker"><rect fill="#F1F1F1" height="45.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="463" y="348"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="569" y="353"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="567" y="355"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="567" y="359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="478" y="380.6738">MQTT Broker</text></g><!--MD5=[2b9539b446c540c03d44e9a2528f147d]
entity realtimedb--><g id="elem_realtimedb"><path d="M46,482 C46,472 125,472 125,472 C125,472 204,472 204,482 L204,506.6406 C204,516.6406 125,516.6406 125,516.6406 C125,516.6406 46,516.6406 46,506.6406 L46,482 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M46,482 C46,492 125,492 125,492 C125,492 204,492 204,482 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="56" y="508.6738">Firebase Realtime DB</text></g><!--MD5=[10fb712a5dfe6528bb3d0328de120a66]
entity documentdb--><g id="elem_documentdb"><path d="M239.5,482 C239.5,472 323,472 323,472 C323,472 406.5,472 406.5,482 L406.5,506.6406 C406.5,516.6406 323,516.6406 323,516.6406 C323,516.6406 239.5,516.6406 239.5,506.6406 L239.5,482 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M239.5,482 C239.5,492 323,492 323,492 C323,492 406.5,492 406.5,482 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="249.5" y="508.6738">Firebase Document DB</text></g><!--MD5=[e2307af040e3f87d22824e7603ca28ec]
entity api--><g id="elem_api"><rect fill="#F1F1F1" height="45.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="61" x="287.5" y="348"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="328.5" y="353"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="326.5" y="355"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="326.5" y="359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="302.5" y="380.6738">API</text></g><!--MD5=[08af8945a84acfe1eabc0963aa87c412]
entity web--><g id="elem_web"><rect fill="#F1F1F1" height="45.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="123.5" y="348"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="184.5" y="353"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="182.5" y="355"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="182.5" y="359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="138.5" y="380.6738">WebUI</text></g><!--MD5=[52340758e4ea7379191b20da15c712ca]
link sensor to py--><g id="link_sensor_py"><path d="M551.58,90.97 C546.17,110.64 538.88,137.17 533.46,156.87 " fill="none" id="sensor-py" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="532.13,161.72,538.3743,154.1036,533.4564,156.8992,530.6609,151.9813,532.13,161.72" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="552.95,86.01,546.7267,93.6435,551.6368,90.8345,554.4459,95.7446,552.95,86.01" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="545" y="128.7686">checking depth</text></g><!--MD5=[eca0c6a07fbc339af70b8ac1221e1c27]
link py to actuator--><g id="link_py_actuator"><path d="M568.84,185 C603.69,185 652.55,185 686.91,185 " fill="none" id="py-to-actuator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="692.3,185,683.3,181,687.3,185,683.3,189,692.3,185" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="587" y="178.7686">availability light</text></g><!--MD5=[12fbb059d29e9bfb2c59980d6affabd6]
link py to broker--><g id="link_py_broker"><path d="M526,208.19 C526,241.9 526,305.94 526,342.53 " fill="none" id="py-to-broker" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="526,347.73,530,338.73,526,342.73,522,338.73,526,347.73" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="527" y="252.7686">Wi-Fi (MQTT)</text></g><!--MD5=[44e5c952b73b9c4d131ba4175e513f16]
link web to api--><g id="link_web_api"><path d="M210.1,371 C233.18,371 260.7,371 282.17,371 " fill="none" id="web-api" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="287.21,371,278.21,367,282.21,371,278.21,375,287.21,371" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="204.86,371,213.86,375,209.86,371,213.86,367,204.86,371" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="223" y="364.7686">sockets</text></g><!--MD5=[e2a2504b23e16ce9f7386150b129f2d2]
link api to realtimedb--><g id="link_api_realtimedb"><path d="M282.81,394.16 C249.22,415.3 198.71,447.1 163.93,468.99 " fill="none" id="api-realtimedb" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="159.34,471.88,169.0873,470.4696,163.5712,469.2159,164.8248,463.6997,159.34,471.88" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="287.42,391.25,277.6727,392.6604,283.1888,393.9141,281.9352,399.4303,287.42,391.25" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="228" y="438.7686">availability</text></g><!--MD5=[3b08bbfb039112ccffaa42ca08d03cbb]
link api to documentdb--><g id="link_api_documentdb"><path d="M319.11,399.09 C319.94,419.16 321.06,446.4 321.89,466.46 " fill="none" id="api-documentdb" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="322.1,471.66,325.7098,462.4965,321.8853,466.6646,317.7172,462.8401,322.1,471.66" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="318.91,394,315.2729,403.1527,319.1098,398.996,323.2665,402.8329,318.91,394" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="321" y="438.7686">historic data</text></g><!--MD5=[70b6dbfc7051eff95f00d3275907dc68]
reverse link api to broker--><g id="link_api_broker"><path d="M353.75,371 C383.69,371 427.15,371 462.93,371 " fill="none" id="api-backto-broker" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="348.69,371,357.69,375,353.69,371,357.69,367,348.69,371" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="366.75" y="364.7686">Wi-Fi (MQTT)</text></g><!--MD5=[740f797d51df690c045d4d9c09ba37b4]
@startuml

package Thing {
    component "Ultrasonic Sensor" as sensor
    component "PyCom" as py
    component "Light" as actuator

    sensor <-d-> py : checking depth
    actuator <-l- py : availability light
}

package Server {

package Gateway {
    component "MQTT Broker" as broker
}

py - -> broker : Wi-Fi (MQTT)

package Internet {
    database "Firebase Realtime DB" as realtimedb
    database "Firebase Document DB" as documentdb

    component API as api

    component WebUI as web

    api <-l-> web : sockets
    api <-d-> realtimedb : availability
    api <-d-> documentdb : historic data
}

broker -l-> api : Wi-Fi (MQTT)

}

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>